import{r as n,u as R,b as E,j as e,H as F,a as v}from"./app.js";import{C as L}from"./custom-submit-button.js";import{I as o,L as d}from"./label.js";import{I as m}from"./input.js";import{A as w}from"./app-layout.js";import{A as I}from"./auth-layout.js";import{s as x}from"./index3.js";import{S as k}from"./search.js";import{L as A}from"./loader-circle.js";import"./app2.js";import"./createLucideIcon.js";import"./loader.js";import"./index.js";import"./index2.js";function K({rider:i}){const s=i!=null,[y,u]=n.useState(!1),[g,f]=n.useState(!1),[t,h]=n.useState(),[p,N]=n.useState(""),[c,_]=n.useState(p),[r,l]=n.useState({user_id:i?.user?.id||0,name:i?.user?.name||"",email:i?.user?.email||"",phone:i?.user?.phone||"",vehicle_number:i?.vehicle_number||""}),{errors:j}=R().props;n.useEffect(()=>{const a=setTimeout(()=>{_(p)},500);return()=>clearTimeout(a)},[p]),n.useEffect(()=>{c&&!s&&(f(!0),E.get(x("users.search"),{params:{query:c}}).then(a=>{h(a.data)}).finally(()=>{f(!1)})),c||h([])},[c]),n.useEffect(()=>{s||(t&&t.length==1?l({...r,user_id:t[0].id,name:t[0].name,email:t[0].email,phone:t[0].phone}):l({user_id:0,name:"",email:"",phone:"",vehicle_number:""}))},[t]);const C=a=>{l({user_id:0,name:"",email:"",phone:"",vehicle_number:""}),l({...r,user_id:a.id,name:a.name,email:a.email,phone:a.phone}),h([a])},S=()=>{if(u(!0),s){v.put(x("riders.update",i.id),r,{onFinish:()=>{u(!1)}});return}v.post(x("riders.store"),r,{onFinish:()=>{u(!1)}})};return e.jsxs(w,{children:[e.jsx(F,{title:"Create Rider"}),e.jsxs(I,{title:s?`Edit ${i.user.name}`:"Create Rider",description:s?`Fill the form to update Rider ${i.user.name}`:"Fill the form to create a new Rider",children:[!s&&e.jsxs("div",{className:"flex h-9 items-center justify-center rounded-2xl bg-accent/50",children:[e.jsx(k,{className:"mx-2 mr-4 h-5 w-5 shrink-0 opacity-50"}),e.jsx(m,{disabled:s,onChange:a=>N(a.target.value),className:`h-full rounded-none border-0 ${g?"":"rounded-r-2xl"} bg-accent/90 px-2 ring-0 focus:ring-0 focus-visible:ring-0`,placeholder:"Search a user to make a rider"}),g&&e.jsx(A,{className:"mx-2 h-5 w-5 animate-spin"})]}),e.jsx(o,{message:j.id}),e.jsx("div",{className:"w-full",children:t&&t.length>0&&e.jsx("div",{className:"w-full overflow-y-auto bg-accent/20 p-1",children:t.map((a,b)=>e.jsxs("div",{onClick:()=>C(a),className:"flex justify-between gap-3 border-b px-2 py-2 hover:cursor-pointer hover:bg-accent/50",children:[e.jsx("span",{children:b+1}),e.jsx("span",{children:a.name}),e.jsx("span",{children:a.email}),e.jsx("span",{children:a.phone})]},b))})}),e.jsxs("div",{className:"grid grid-cols-2 gap-x-3 gap-y-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"name",children:"Name"}),e.jsx(m,{id:"name",readOnly:!s,disabled:!s,type:"text",className:"capitalize",value:r.name,placeholder:"Rider name",onChange:a=>{l({...r,name:a.target.value})}}),e.jsx(o,{message:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(m,{readOnly:!0,disabled:!0,id:"email",className:"",value:r.email,type:"text",placeholder:"Rider email"}),e.jsx(o,{message:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"phone",children:"Phone Number"}),e.jsx(m,{readOnly:!s,disabled:!s,id:"phone",className:"capitalize",value:r.phone,type:"text",placeholder:"Rider phone number",onChange:a=>{l({...r,phone:a.target.value})}}),e.jsx(o,{message:""})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"vehicle_number",children:"Vehicle Number"}),e.jsx(m,{id:"vehicle_number",value:r.vehicle_number,onChange:a=>{l({...r,vehicle_number:a.target.value})},type:"text",className:"uppercase"}),e.jsx(o,{message:j.vehicle_number})]})]}),e.jsx(L,{onClick:S,isLoading:y,label:s?"Update Rider":"Create Rider"})]})]})}export{K as default};
