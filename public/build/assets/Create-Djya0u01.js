import{u as j,r as a,j as i,H as C,a as m}from"./app-PccVoXma.js";import{C as S}from"./custom-input-BvitlWvP.js";import{C as f}from"./custom-selection-ChyKN3lN.js";import{C as q}from"./custom-submit-button-C3jsCBL3.js";import{A}from"./app-layout-CBXR6lOZ.js";import{A as E}from"./auth-layout-Bq2gos-b.js";import{s as _}from"./index-vmwrf4-U.js";import"./app-Dso-gTI6.js";import"./label-B75mYwfy.js";import"./createLucideIcon-BBMH4QBs.js";import"./index-DBBclmEc.js";import"./input-BvD20U66.js";import"./search-9ujo9a3l.js";import"./index-DwxeKqD2.js";import"./loader-_qUP40tW.js";function z({stock:e,products:d,suppliers:v}){const o=e!=null,u=j().props.errors,[h,n]=a.useState({}),[b,p]=a.useState({}),[x,s]=a.useState(!1),[t,l]=a.useState({product_id:e?.product_id||"",supplier_id:e?.supplier_id||"",date:e?.date||new Date().toISOString().split("T")[0],quantity_received:e?.quantity_received||""}),[c,y]=a.useState(e?.product?.unit||"Unit");a.useEffect(()=>{y(t.product_id?d.find(r=>r.id===t.product_id)?.unit:"")},[t.product_id,d]),a.useEffect(()=>{o&&e&&(n({value:e.product_id,label:e.product.name}),p({value:e.supplier_id,label:e.supplier.name}))},[o,e,d]);const g=()=>(console.log(t),s(!0),o?m.put(_("batches.update",e.id),t,{onFinish:()=>{s(!1)}}):m.post(_("batches.store"),t,{onFinish:()=>{s(!1)}}));return i.jsxs(A,{children:[i.jsx(C,{title:"Add Stock"}),i.jsxs(E,{title:o?"Update Stock":"Add Stock",description:o?`Fill the form to update ${e.batch_no} stock`:"Fill the form to create a new stock",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[i.jsx(f,{label:"Select Product",data:d,onSelect:r=>{n(r),l({...t,product_id:r.value})},selectedOption:h,placeholder:"Select Product",error:u.product_id}),i.jsx(f,{label:"Select Supplier",data:v,placeholder:"Select Supplier",onSelect:r=>{p(r),l({...t,supplier_id:r.value})},selectedOption:b,error:u.supplier_id}),i.jsx(S,{id:"date",name:"date",type:"date",label:"Date",value:t.date,onChange:r=>l({...t,date:r.target.value}),error:u.date}),i.jsx(S,{id:"quantity_received",name:"quantity_received",type:"number",label:`Quantity Received ${c}`,placeholder:`enter quantity received in ${c}`,value:t.quantity_received,onChange:r=>l({...t,quantity_received:r.target.value}),error:u.quantity_received})]}),i.jsx(q,{label:o?"Update  Stock":"Add Stock",isLoading:x,onClick:()=>{g()}})]})]})}export{z as default};
