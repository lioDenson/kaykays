import{u as j,r as a,j as i,H as C,a as m}from"./app-Cm4b0MRZ.js";import{C as S}from"./custom-input-C8zmYmQE.js";import{C as f}from"./custom-selection-GEqW07Tw.js";import{C as q}from"./custom-submit-button-C9KFqMKP.js";import{A}from"./app-layout-CKTzcKJV.js";import{A as E}from"./auth-layout-C4tO_X4t.js";import{s as _}from"./index-vmwrf4-U.js";import"./app-BUjcEukZ.js";import"./createLucideIcon-CDzehuva.js";import"./label-CX7AZ_dB.js";import"./index-0pHPRr8x.js";import"./input-4zn4-9bI.js";import"./search-Czf_K0T6.js";import"./index-BzTAvke0.js";import"./loader-CORz_YrV.js";function z({stock:e,products:o,suppliers:v}){const d=e!=null,u=j().props.errors,[h,n]=a.useState({}),[b,p]=a.useState({}),[x,s]=a.useState(!1),[t,l]=a.useState({product_id:e?.product_id||"",supplier_id:e?.supplier_id||"",date:e?.date||new Date().toISOString().split("T")[0],quantity_received:e?.quantity_received||""}),[c,y]=a.useState(e?.product?.unit||"Unit");a.useEffect(()=>{y(t.product_id?o.find(r=>r.id===t.product_id)?.unit:"")},[t.product_id,o]),a.useEffect(()=>{d&&e&&(n({value:e.product_id,label:e.product.name}),p({value:e.supplier_id,label:e.supplier.name}))},[d,e,o]);const g=()=>(console.log(t),s(!0),d?m.put(_("batches.update",e.id),t,{onFinish:()=>{s(!1)}}):m.post(_("batches.store"),t,{onFinish:()=>{s(!1)}}));return i.jsxs(A,{children:[i.jsx(C,{title:"Add Stock"}),i.jsxs(E,{title:d?"Update Stock":"Add Stock",description:d?`Fill the form to update ${e.batch_no} stock`:"Fill the form to create a new stock",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 ",children:[i.jsx(f,{label:"Select Product",data:o,onSelect:r=>{n(r),l({...t,product_id:r.value})},selectedOption:h,placeholder:"Select Product",error:u.product_id}),i.jsx(f,{label:"Select Supplier",data:v,placeholder:"Select Supplier",onSelect:r=>{p(r),l({...t,supplier_id:r.value})},selectedOption:b,error:u.supplier_id}),i.jsx(S,{id:"date",name:"date",type:"date",label:"Date",value:t.date,onChange:r=>l({...t,date:r.target.value}),error:u.date}),i.jsx(S,{id:"quantity_received",name:"quantity_received",type:"number",label:`Quantity Received ${c}`,placeholder:`enter quantity received in ${c}`,value:t.quantity_received,onChange:r=>l({...t,quantity_received:r.target.value}),error:u.quantity_received})]}),i.jsx(q,{label:d?"Update  Stock":"Add Stock",isLoading:x,onClick:()=>{g()}})]})]})}export{z as default};
