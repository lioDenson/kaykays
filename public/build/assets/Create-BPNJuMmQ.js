import{r as l,u as d,j as e,a as C}from"./app-Cm4b0MRZ.js";import{C as f}from"./custom-input-C8zmYmQE.js";import{C as w}from"./custom-submit-button-C9KFqMKP.js";import{C as b}from"./custom-text-area-DMdpB5BL.js";import{C as S}from"./custom-toaster-Ct6F5So0.js";import{s as A,a as E}from"./numberSanitizer-Dj-CgJwP.js";import{A as F}from"./app-layout-CKTzcKJV.js";import{A as L}from"./auth-layout-C4tO_X4t.js";import"./app-BUjcEukZ.js";import"./createLucideIcon-CDzehuva.js";import"./label-CX7AZ_dB.js";import"./index-0pHPRr8x.js";import"./input-4zn4-9bI.js";import"./loader-CORz_YrV.js";import"./index-BzTAvke0.js";import"./index-vmwrf4-U.js";function H({product:a}){const n=a!=null,[h,m]=l.useState(!1),{errors:u}=d().props,{account:g}=d().props,{flash:x}=d().props,j={name:"",unit:"",price:0,description:"",account_id:g.id},[s,c]=l.useState({raw:"",numeric:0}),[t,i]=l.useState({name:a?.name||"",unit:a?.unit||"",price:a?.price||s.numeric,description:a?.description||"",account_id:g.id}),v=()=>(m(!0),n?C.put(`/products/${a?.id}`,t,{onFinish:()=>{m(!1)}}):C.post("/products",t,{onFinish:()=>{m(!1),i(j),c({raw:"",numeric:0})}}));return e.jsxs(F,{children:[x&&e.jsx(S,{flash:x}),e.jsxs(L,{title:`${n?"Edit":"Create New"} Product`,description:n?`Fill the form to update ${a.name} product`:"Fill the form to create a new product",children:[e.jsxs("div",{className:"flex columns-2 flex-col gap-2",children:[e.jsx(f,{id:"name",label:"Name",name:"name",value:t.name,onChange:r=>i({...t,name:r.target.value}),error:u.name}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(f,{id:"unit",label:"Unit",name:"unit",value:t.unit,onChange:r=>i({...t,unit:r.target.value}),error:u.unit}),e.jsx(f,{id:"price",label:"Price",name:"price",value:s.raw??(s.raw==""?"":String(s.numeric)),onChange:r=>{const{raw:p,numeric:o}=E(r.target.value);c({raw:p,numeric:o}),i({...t,price:o})},onBlur:r=>{const{raw:p,numeric:o}=A(r.target.value);c({raw:p,numeric:o})},error:u.price})]}),e.jsx(b,{id:"description",label:"Description",name:"description",value:t.description,onChange:r=>i({...t,description:r.target.value})})]}),e.jsx(w,{label:n?"Update":"Create",isLoading:h,onClick:()=>v()})]})]})}export{H as default};
